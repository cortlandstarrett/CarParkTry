-- BP 7.1.6 content: InstanceStateMachine syschar: 3 persistence-version: 7.1.6

INSERT INTO SM_ISM
	VALUES ("46c7e8be-9c51-454b-9c37-2c903d763914",
	"2837bab5-1d06-4541-b05a-1f67cc712852");
INSERT INTO SM_SM
	VALUES ("46c7e8be-9c51-454b-9c37-2c903d763914",
	'',
	0);
INSERT INTO SM_MOORE
	VALUES ("46c7e8be-9c51-454b-9c37-2c903d763914");
INSERT INTO SM_EVTDI
	VALUES ("ab871650-3a13-4b53-821f-55380bba2812",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	'fromEntry',
	'',
	"ba5eda7a-def5-0000-0000-000000000002",
	'',
	"04b8c607-81c1-43b1-ab5b-dc9e36931354",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_EVTDI
	VALUES ("b32bb220-03cc-4e80-ae80-202d10731bde",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	'tktNumber',
	'',
	"ba5eda7a-def5-0000-0000-000000000002",
	'',
	"04b8c607-81c1-43b1-ab5b-dc9e36931354",
	"ab871650-3a13-4b53-821f-55380bba2812");
INSERT INTO SM_LEVT
	VALUES ("04b8c607-81c1-43b1-ab5b-dc9e36931354",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_SEVT
	VALUES ("04b8c607-81c1-43b1-ab5b-dc9e36931354",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_EVT
	VALUES ("04b8c607-81c1-43b1-ab5b-dc9e36931354",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"00000000-0000-0000-0000-000000000000",
	1,
	'Ticket_Created',
	0,
	'',
	'TKT1',
	'');
INSERT INTO SM_STATE
	VALUES ("bc67253d-5f96-497a-80b0-eeef2a25477d",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"00000000-0000-0000-0000-000000000000",
	'Ticket Created',
	1,
	0);
INSERT INTO SM_SEME
	VALUES ("bc67253d-5f96-497a-80b0-eeef2a25477d",
	"04b8c607-81c1-43b1-ab5b-dc9e36931354",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_STATE
	VALUES ("eaf92796-106a-494e-bb8f-286e9dbcafbb",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"00000000-0000-0000-0000-000000000000",
	'Associating Entry',
	2,
	0);
INSERT INTO SM_CH
	VALUES ("eaf92796-106a-494e-bb8f-286e9dbcafbb",
	"04b8c607-81c1-43b1-ab5b-dc9e36931354",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO SM_SEME
	VALUES ("eaf92796-106a-494e-bb8f-286e9dbcafbb",
	"04b8c607-81c1-43b1-ab5b-dc9e36931354",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_NSTXN
	VALUES ("39ed5ab0-5e7b-48cc-80bc-ee106bf19d0a",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"bc67253d-5f96-497a-80b0-eeef2a25477d",
	"04b8c607-81c1-43b1-ab5b-dc9e36931354",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_TXN
	VALUES ("39ed5ab0-5e7b-48cc-80bc-ee106bf19d0a",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"eaf92796-106a-494e-bb8f-286e9dbcafbb",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO SM_MOAH
	VALUES ("990d2cde-4867-433f-8e0f-b55b190ea98c",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"bc67253d-5f96-497a-80b0-eeef2a25477d");
INSERT INTO SM_AH
	VALUES ("990d2cde-4867-433f-8e0f-b55b190ea98c",
	"46c7e8be-9c51-454b-9c37-2c903d763914");
INSERT INTO SM_ACT
	VALUES ("990d2cde-4867-433f-8e0f-b55b190ea98c",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	1,
	'// This instance state should now exist because a new (associated) instance of a ticket has been created.

LOG::LogInfo( message: "New Ticket Instance now exists.");',
	'',
	0);
INSERT INTO SM_MOAH
	VALUES ("a91f39bd-9e9e-40b7-8c34-46aa71f2918f",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"eaf92796-106a-494e-bb8f-286e9dbcafbb");
INSERT INTO SM_AH
	VALUES ("a91f39bd-9e9e-40b7-8c34-46aa71f2918f",
	"46c7e8be-9c51-454b-9c37-2c903d763914");
INSERT INTO SM_ACT
	VALUES ("a91f39bd-9e9e-40b7-8c34-46aa71f2918f",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	1,
	'// Relate the newly created ticket to the entry it is to be issued from, and set the time of its creation.

ent = ENT::useInstance();

if (ent.ENT_Number == rcvd_evt.fromEntry)
	
	select any ticket from instances of TKT where selected.TKT_Number == rcvd_evt.tktNumber;

	relate ticket to ent across R1;
	
	//current_time = TIM::current_clock();
	
	ticket.When_Created = TIM::current_clock();
	
	LOG::LogTime( message: " is time of creation for ticket number: ", t: ticket.When_Created);
	LOG::LogInfo( message: "Associating ticket number: ");
	LOG::LogInteger( message: ticket.TKT_Number);
	
	generate ENT6:Ticket_Issued to ent;

else
	
	LOG::LogInfo( message: "There''s been a mix up with entries and tickets!");
	
end if;',
	'',
	0);
INSERT INTO SM_TAH
	VALUES ("89cd18df-bb3b-4e24-960e-e51ad26aeb60",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	"39ed5ab0-5e7b-48cc-80bc-ee106bf19d0a");
INSERT INTO SM_AH
	VALUES ("89cd18df-bb3b-4e24-960e-e51ad26aeb60",
	"46c7e8be-9c51-454b-9c37-2c903d763914");
INSERT INTO SM_ACT
	VALUES ("89cd18df-bb3b-4e24-960e-e51ad26aeb60",
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	1,
	'',
	'',
	0);
INSERT INTO GD_MD
	VALUES ("808ecd0b-b419-402f-9608-80354c0e59ca",
	8,
	"46c7e8be-9c51-454b-9c37-2c903d763914",
	40,
	0,
	0,
	1,
	1,
	1,
	12,
	1,
	0,
	0,
	0,
	0,
	0,
	'4.1.17',
	'CarParkTry::CP_System::CP_Controller::CP_Control_Elements::Ticket::Instance State Machine');
INSERT INTO GD_GE
	VALUES ("71a39a58-65dd-42e4-bb82-c12fe0e22c56",
	"808ecd0b-b419-402f-9608-80354c0e59ca",
	"bc67253d-5f96-497a-80b0-eeef2a25477d",
	41,
	0,
	'CarParkTry::CP_System::CP_Controller::CP_Control_Elements::Ticket::Instance State Machine::Ticket Created');
INSERT INTO GD_SHP
	VALUES ("71a39a58-65dd-42e4-bb82-c12fe0e22c56");
INSERT INTO GD_NCS
	VALUES ("71a39a58-65dd-42e4-bb82-c12fe0e22c56");
INSERT INTO DIM_ND
	VALUES (601.000000,
	109.000000,
	"71a39a58-65dd-42e4-bb82-c12fe0e22c56");
INSERT INTO DIM_GE
	VALUES (4344.000000,
	3156.000000,
	"71a39a58-65dd-42e4-bb82-c12fe0e22c56",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("71a39a58-65dd-42e4-bb82-c12fe0e22c56",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_CON
	VALUES ("78858cb7-f0e9-4be3-97f6-84b48e1573c0",
	4620.000000,
	3265.000000,
	"71a39a58-65dd-42e4-bb82-c12fe0e22c56");
INSERT INTO GD_GE
	VALUES ("caa45ce6-b525-4127-a13e-ba86a111f3e8",
	"808ecd0b-b419-402f-9608-80354c0e59ca",
	"eaf92796-106a-494e-bb8f-286e9dbcafbb",
	41,
	0,
	'CarParkTry::CP_System::CP_Controller::CP_Control_Elements::Ticket::Instance State Machine::Associating Entry');
INSERT INTO GD_SHP
	VALUES ("caa45ce6-b525-4127-a13e-ba86a111f3e8");
INSERT INTO GD_NCS
	VALUES ("caa45ce6-b525-4127-a13e-ba86a111f3e8");
INSERT INTO DIM_ND
	VALUES (565.000000,
	397.000000,
	"caa45ce6-b525-4127-a13e-ba86a111f3e8");
INSERT INTO DIM_GE
	VALUES (4356.000000,
	3408.000000,
	"caa45ce6-b525-4127-a13e-ba86a111f3e8",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("caa45ce6-b525-4127-a13e-ba86a111f3e8",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_CON
	VALUES ("4b1e5303-fe35-4a25-ac95-fd840de0e926",
	4620.000000,
	3408.000000,
	"caa45ce6-b525-4127-a13e-ba86a111f3e8");
INSERT INTO GD_GE
	VALUES ("5711db20-7fe6-4d4c-8c48-3957e07e4365",
	"808ecd0b-b419-402f-9608-80354c0e59ca",
	"39ed5ab0-5e7b-48cc-80bc-ee106bf19d0a",
	42,
	0,
	'CarParkTry::CP_System::CP_Controller::CP_Control_Elements::Ticket::Instance State Machine::Ticket Created::TKT1: Ticket_Created');
INSERT INTO GD_CON
	VALUES ("5711db20-7fe6-4d4c-8c48-3957e07e4365",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("f414d9d9-6cd1-4296-b9f4-094819ce80c0",
	"5711db20-7fe6-4d4c-8c48-3957e07e4365",
	1,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"f414d9d9-6cd1-4296-b9f4-094819ce80c0");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"f414d9d9-6cd1-4296-b9f4-094819ce80c0",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("f414d9d9-6cd1-4296-b9f4-094819ce80c0",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("a50e4d67-f7ed-4ae7-abda-503a4e370180",
	"5711db20-7fe6-4d4c-8c48-3957e07e4365",
	3,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"a50e4d67-f7ed-4ae7-abda-503a4e370180");
INSERT INTO DIM_GE
	VALUES (4330.000000,
	3325.000000,
	"a50e4d67-f7ed-4ae7-abda-503a4e370180",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("a50e4d67-f7ed-4ae7-abda-503a4e370180",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_CTXT
	VALUES ("0f7f8dff-d922-4b8e-baa1-2a223ba71498",
	"5711db20-7fe6-4d4c-8c48-3957e07e4365",
	2,
	0.000000,
	0.000000);
INSERT INTO DIM_ND
	VALUES (0.000000,
	0.000000,
	"0f7f8dff-d922-4b8e-baa1-2a223ba71498");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"0f7f8dff-d922-4b8e-baa1-2a223ba71498",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("0f7f8dff-d922-4b8e-baa1-2a223ba71498",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO GD_LS
	VALUES ("9e7d3604-3027-4479-8bd0-6648304e7207",
	"5711db20-7fe6-4d4c-8c48-3957e07e4365",
	"00000000-0000-0000-0000-000000000000",
	"86736849-cd72-4077-b484-e5e542d7edcc",
	"409662fe-f921-4ddd-830b-13383af71806");
INSERT INTO DIM_WAY
	VALUES ("86736849-cd72-4077-b484-e5e542d7edcc",
	4620.000000,
	3265.000000,
	"5711db20-7fe6-4d4c-8c48-3957e07e4365",
	"00000000-0000-0000-0000-000000000000",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_WAY
	VALUES ("409662fe-f921-4ddd-830b-13383af71806",
	4620.000000,
	3408.000000,
	"5711db20-7fe6-4d4c-8c48-3957e07e4365",
	"00000000-0000-0000-0000-000000000000",
	"86736849-cd72-4077-b484-e5e542d7edcc");
INSERT INTO DIM_GE
	VALUES (0.000000,
	0.000000,
	"5711db20-7fe6-4d4c-8c48-3957e07e4365",
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ELE
	VALUES ("5711db20-7fe6-4d4c-8c48-3957e07e4365",
	0,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO DIM_ED
	VALUES ("78858cb7-f0e9-4be3-97f6-84b48e1573c0",
	"4b1e5303-fe35-4a25-ac95-fd840de0e926",
	"5711db20-7fe6-4d4c-8c48-3957e07e4365");
INSERT INTO DIM_DIA
	VALUES ("808ecd0b-b419-402f-9608-80354c0e59ca",
	'',
	1.000000,
	0.000000,
	0.000000,
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_OBJ_PROXY
	VALUES ("2837bab5-1d06-4541-b05a-1f67cc712852",
	'Ticket',
	4,
	'TKT',
	'',
	"00000000-0000-0000-0000-000000000000",
	'../Ticket.xtuml');
